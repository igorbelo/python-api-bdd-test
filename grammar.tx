Program:
  resource=Resource | header_codes*=FirstCode
;

FirstCode:
  Resource | Code
;

Ae:
  resource=Resource | code=Code
;

Resource:
  'resource ' resource=ID '{'
    commands*=Command
  '}'
;

Command:
  ContextCommand | CallbackCommand | TestCode
;

ContextCommand:
  'context' description=STRING '{'
    body+=Command
  '}'
;

CallbackCommand:
  callback='before'|'after' '{'
    body+=Code
  '}'
;

BlockCode:
  ContextCommand | CallbackCommand | Code
;

TestCode:
  'it' description=STRING '{'
    body+=Code
  '}'
;

Code:
  /[^{}](.*)?$/
;
